# 웹 이력서/포트폴리오 분리 프로젝트 마일스톤

> 기반 문서: 사용자 제공 "웹 이력서 및 포트폴리오 분리 기획서"(2026-02-21), README.md, docs/resume-engineering-guide-2025.md
> 실행 라벨: `[SEQUENTIAL]`(순차), `[PARALLEL:PG-n]`(같은 그룹끼리 병렬)
> 분해 기준: 한 번의 구현 세션에서 구현/검증 가능한 컨텍스트 윈도우 친화 단위
> 구현 분리 원칙: UI 구현 트랙(Gemini)과 기능 구현 트랙(Codex)을 분리 운영

## Phase 1. [SEQUENTIAL] 요구사항 고정 및 공통 계약 정의
- [x] **이력서/포트폴리오 정보 구조 및 URL 규칙 확정**
  - 목표: 이력서(요약/후킹)와 포트폴리오(케이스 스터디)의 섹션 책임, 라우트, 앵커 규칙을 문서화한다.
  - 검증: 이력서 항목 1개당 포트폴리오 상세 섹션 1개로 매핑 표가 존재한다.

- [x] **UI-기능 경계(API/데이터 계약) 명세 작성**
  - 목표: UI 컴포넌트가 소비할 데이터 스키마(요약 문장, 임팩트 수치, CTA 링크, 포트폴리오 본문 블록)를 고정한다.
  - 검증: UI 트랙과 기능 트랙이 동일한 타입/필드 정의를 기준으로 병렬 작업 가능하다.

## Phase 2. [PARALLEL:PG-1] UI 구현 트랙 (Gemini) - 이력서 페이지
- [x] **이력서 스캔 최적 레이아웃 구현**
  - 목표: F자형 스캔에 맞춘 단일 컬럼/최대 폭 제한/여백 중심 레이아웃을 적용한다.
  - 검증: 1~2분 스캔에서 헤더, 핵심 역량, 임팩트 불릿이 시각적으로 우선 노출된다.

- [x] **임팩트 요약 블록 및 CTA 버튼 UI 구현**
  - 목표: `기술 -> 개선/개발 -> 수치 임팩트` 패턴 불릿과 "상세 케이스 스터디 보기" 버튼 UI를 구성한다.
  - 검증: 각 주요 프로젝트 요약 하단에 포트폴리오 이동 CTA가 일관된 스타일로 노출된다.

## Phase 3. [PARALLEL:PG-1] UI 구현 트랙 (Gemini) - 포트폴리오 페이지
- [x] **케이스 스터디 가독성 레이아웃 구현**
  - 목표: 프로젝트 개요/문제 배경/의사결정/결과-회고 구조를 긴 글에 적합한 읽기 흐름으로 배치한다.
  - 검증: 섹션 구분이 명확하고, 본문이 모바일/데스크톱 모두에서 끊김 없이 읽힌다.

- [x] **고정 목차/시각 자료/프린트 친화 UI 구현**
  - 목표: 고정 사이드바 목차, 다이어그램/그래프 영역, 인쇄 시 레이아웃 보정용 UI 스타일을 제공한다.
  - 검증: 프린트 미리보기에서 웹 전용 UI가 숨김 처리되고 핵심 문단/이미지가 중간 절단되지 않는다.

## Phase 4. [PARALLEL:PG-2] 기능 구현 트랙 (Codex) - 데이터 모델 및 연결 로직
- [x] **이력서-포트폴리오 매핑 데이터 모델 구현**
  - 목표: 이력서 항목 ID와 포트폴리오 케이스 스터디 섹션 ID를 연결하는 데이터 계층을 구현한다.
  - 검증: 잘못된 매핑(누락/중복/깨진 링크) 검증 로직이 동작한다.

- [x] **CTA 이동 및 딥링크 라우팅 기능 구현**
  - 목표: 이력서 CTA 클릭 시 포트폴리오의 정확한 프로젝트/섹션으로 이동하는 라우팅을 구현한다.
  - 검증: 새로고침 후에도 동일한 포트폴리오 섹션으로 복원된다.

## Phase 5. [PARALLEL:PG-2] 기능 구현 트랙 (Codex) - 포트폴리오 상호작용/출력
- [x] **목차 동기화 및 현재 섹션 추적 기능 구현**
  - 목표: 스크롤 위치에 따라 활성 목차를 업데이트하고 목차 클릭 시 해당 섹션으로 이동한다.
  - 검증: 섹션 이동 후 활성 상태가 정확히 반영된다.

- [x] **인쇄 최적화 기능 구현 (포트폴리오 PDF 다운로드 제외)**
  - 목표: 포트폴리오 페이지의 인쇄용 보정(링크 URL 표시, 페이지 분할 방지 룰, 웹 전용 UI 숨김)을 적용한다.
  - 검증: 브라우저 인쇄 미리보기/Save as PDF에서 주요 문단·이미지의 페이지 분할 문제가 재현되지 않는다.

## Phase 6. [SEQUENTIAL] 통합 검증 및 품질 게이트
- [x] **사용자 흐름 E2E 검증 (이력서 -> 포트폴리오 -> 인쇄 저장)**
  - 목표: 기획서의 면접관 시나리오를 엔드투엔드 플로우로 자동/수동 검증한다.
  - 검증: 이력서 스캔, CTA 이동, 포트폴리오 탐색, 인쇄 저장까지 단절 없이 완료된다.

- [x] **비기능 요구사항 점검 (접근성/성능/인쇄 품질)**
  - 목표: 접근성, 기본 성능 지표, 인쇄 결과 품질을 점검하고 회귀 기준선을 만든다.
  - 검증: 릴리즈 전 체크리스트가 문서화되고 실패 항목은 수정 이슈로 분리된다.

## Phase 7. [SEQUENTIAL] 콘텐츠 이관 및 운영 준비
- [x] **기존 이력서 콘텐츠를 이중 구조로 이관**
  - 목표: 요약형 이력서 콘텐츠와 스토리형 포트폴리오 콘텐츠를 같은 근거에 기반해 분리 정리한다.
  - 검증: 핵심 프로젝트마다 "요약 1개 + 상세 케이스 스터디 1개"가 연결된다.

- [x] **운영 가이드 및 업데이트 규칙 정리**
  - 목표: 이후 자동 업데이트/수동 보정 시 UI 트랙과 기능 트랙의 책임 경계를 운영 문서에 반영한다.
  - 검증: 다음 작업자가 문서만 보고 동일한 방식으로 기능 추가/수정할 수 있다.

---

## 병렬 실행 가이드
- `PG-1`: UI 전용 구현 단계로, 디자인/레이아웃 작업을 Gemini에서 독립 진행
- `PG-2`: 기능 전용 구현 단계로, 데이터 연결/라우팅/인쇄 최적화 기능을 Codex에서 독립 진행
- 권장 순서: `Phase 1` 완료 후 `PG-1`과 `PG-2` 병렬 실행 -> `Phase 6` 통합 검증 -> `Phase 7` 운영 정리

---

## 참고 노트

**[2026-02-21] 세션 요약**:
- 발견된 이슈: 초기 검증에서 `src/lib/blog/velog.ts`의 `fast-xml-parser` 타입 선언 누락으로 `astro check`/`tsc --noEmit`가 실패했으나, 의존성 동기화(`pnpm --dir web install`) 후 해결 완료.
- 아키텍처 결정: 딥링크 규칙을 `/portfolio/<caseId>#<sectionId>`로 고정하고, 프로젝트 카드 단위 1:1 매핑 계약(V1)을 문서+타입+검증 유틸로 고정.
**[2026-02-21] 세션 요약 (Phase 2 완료)**:
- 구현 완료: 이력서 페이지(index.astro)의 프로젝트 섹션을 `RESUME_SUMMARY_BLOCKS_V1` 하드코딩 데이터 기반으로 개편.
- 디자인 변경: 박스형 임팩트 카드 대신 가독성이 높은 마크다운 불릿 리스트(`accomplishments`)로 렌더링하도록 `contracts.ts` 스키마 수정 및 `@astropub/md` 도입.
- UX 개선: 포트폴리오 유도 버튼을 시각적 노이즈가 적은 텍스트 링크(대안 1번) 스타일로 변경하여 이력서 톤앤매너 유지.
- 검증: Astro 컴파일러 파싱 문제 해결 및 `typecheck`/`lint` 통과.
**[2026-02-21] 세션 요약 (Phase 4 완료)**:
- 매핑/링크 계약: `buildPortfolioCtaHref`, `parsePortfolioCtaHref`를 추가하고 CTA href 생성을 `/portfolio/<caseId>#<sectionId>` 규칙으로 일원화.
- 검증 강화: `validateResumePortfolioMapping` 입력에 `summaryBlocks`를 추가해 `hasPortfolio=true` 항목의 CTA 누락/형식 오류/caseId·sectionId 불일치를 배포 실패 조건으로 검증.
- 라우팅 복원: 포트폴리오 상세 페이지에서 유효하지 않은 hash 접근 시 `#overview`로 정규화하고, 새로고침 시 hash 유지 동작을 보장.
- E2E 보강: `e2e/portfolio-deep-link.spec.ts`를 추가해 CTA 이동, 새로고침 복원, invalid hash 폴백을 자동 검증.
**[2026-02-21] 세션 요약 (Phase 5 완료)**:
- 요구사항 정합화: 포트폴리오는 별도 PDF 다운로드 기능을 제공하지 않고 브라우저 인쇄 최적화 중심으로 운영하기로 기준을 업데이트.
- E2E 보강: `e2e/portfolio-toc-and-print.spec.ts`에 인쇄 시 외부 링크 URL 노출/본문 블록 페이지 분할 방지 규칙 회귀 검증을 추가.
- 마일스톤 반영: Phase 5 체크박스를 완료 처리했고, 다음 미완료 단계는 Phase 6(통합 검증/품질 게이트)로 이관.
**[2026-02-21] 세션 요약 (Phase 6 완료)**:
- 하이드레이션 안정화: `Layout.astro`의 하이브리드 하이드레이션(`Navigation client:load`, `ChatWidget client:idle`)을 유지하고, `navigation/chat` 준비 이벤트와 `waitForUiReady` 픽스처를 도입해 E2E 플래키를 제거.
- 사용자 흐름 E2E 추가: `e2e/resume-portfolio-print-flow.spec.ts`를 추가해 이력서 CTA -> 포트폴리오 딥링크 -> 목차 동기화 -> print media -> `page.pdf()` 생성까지 자동 검증.
- 비기능 게이트 자동화: `scripts/perf-gate.mjs`, `scripts/quality-issue-sync.mjs`, `docs/release-quality-gate.md`, `phase6:verify` 스크립트를 추가해 품질 체크/문서/이슈 연동을 자동화.
- 성능 개선: 이력서 페이지의 클라이언트 PDF 버튼 직렬화를 제거하고 `GET /api/resume-pdf` 서버 엔드포인트로 전환, dev 훅 충돌을 피하기 위해 PDF 렌더러를 API 요청 시점 동적 import로 조정.
- 최종 검증: `pnpm -C web run phase6:verify` 통과, Lighthouse 성능은 `/` desktop/mobile `100/99`, `/portfolio/exem-data-grid#overview` desktop/mobile `100/99`로 90 하드게이트를 충족.
- 마일스톤 반영: Phase 6 체크박스를 완료 처리했고, 다음 미완료 단계는 Phase 7(콘텐츠 이관 및 운영 준비)이다.
**[2026-02-21] 세션 요약 (Phase 7 완료)**:
- 콘텐츠 스키마 개편: `web/src/lib/resume-portfolio/content.ts`와 `derive.ts`를 도입해 프로젝트 4건의 요약/상세/매핑/케이스 계약을 단일 소스에서 파생하도록 변경.
- API 정리: 기존 `mapping.ts` 기반 V1 상수를 제거하고, Resume/Portfolio 페이지를 `buildResumePortfolioContracts` 소비 방식으로 전환.
- 검증 강화: `validateResumePortfolioMapping`에 `evidenceIds` 누락/중복 검증을 추가해 `hasPortfolio=true` 항목의 근거 ID를 필수 게이트로 고정.
- 테스트 확장: `tests/lib/resume-portfolio/content-schema.test.ts`를 추가하고 `validation.test.ts`를 신규 스키마 기반으로 갱신.
- 운영 문서화: `docs/resume-content-operations.md`를 추가해 UI 트랙/기능 트랙 책임 경계, 자동 업데이트/수동 보정 규칙, 실패 대응, PR 체크리스트를 정리.
