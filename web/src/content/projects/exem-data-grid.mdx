---
companyId: "exem"
title: "데이터 그리드 개발"
company: "Exem"
description: "table 기반 병목을 div + virtualization 아키텍처로 전환해 DOM 90% 감소와 리사이즈 44배 개선을 달성한 공용 그리드 설계 사례"
dateStart: 2025-07-01
updatedAt: 2026-02-22
techStack: ["React", "TanStack Table", "TanStack Virtual", "Vitest"]
priority: 2
storyThread:
  context: "table 구조 제약, 누적 레이아웃 계산, 전면 리렌더링 오버헤드가 중첩되어 고밀도 데이터 화면의 상호작용 품질이 무너지는 상태였습니다."
  architectureSummary: |-
    table 구조를 div + virtualization 아키텍처로 재설계했습니다.
    고정 영역과 스크롤 영역을 분리해 렌더 경계를 명확히 정의했습니다.
    계산 경로를 단순화하고 이벤트 모델을 경량화했습니다.
    통합 회귀 게이트를 구축해 성능 개선을 안정적으로 유지했습니다.
  measurementMethod: "React Profiler, Chrome DevTools Performance, Performance API로 동일 그리드 시나리오를 30회 반복 측정했고 평균값과 p95를 기준값으로 사용했습니다."
  impacts:
    - value: "90%"
      label: "동시 렌더링 DOM 노드 감소"
      description: "가상화 중심 렌더 경계 재설계로 대량 데이터 화면의 렌더 부담을 크게 낮췄습니다."
    - value: "22ms -> 0.5ms"
      label: "리사이즈 처리 44배 개선"
      description: "열 배치 계산을 단순화해 리사이즈 지연을 짧게 유지했습니다."
    - value: "110ms -> 20~30ms"
      label: "인터랙션 지연 단축"
      description: "변경된 행 중심 렌더링으로 조작 응답성을 안정화했습니다."
  threads:
    - issueTitle: "table 구조 제약으로 가상화와 고정 영역을 동시에 유지하기 어려운 문제"
      problems:
        - "모든 행을 DOM에 유지해야 해 노드 수가 23,000+까지 증가했습니다."
        - "고정 영역과 스크롤 영역을 함께 다룰수록 구조 복잡도가 급격히 커졌습니다."
      thoughtProcess: "부분 최적화보다 렌더 경계를 먼저 재설계해야 성능과 기능 조합을 동시에 확보할 수 있다고 판단했습니다."
      actions:
        - "table 유지안과 div 전환안을 비교해 공용 확장성 기준을 정의하고 전환 설계를 주도했습니다."
        - "TanStack Virtual 기반 가상화 구조를 설계하고 고정 영역 패널 분리 아키텍처를 표준화했습니다."
      tradeOff: "A안(table 유지)은 시맨틱 이점이 있었지만 가상화 제약과 계산 복잡도가 컸습니다. B안(div 전환)은 접근성 보완 비용이 생겼지만 확장성과 성능을 확보할 수 있어 B안을 선택했고, 위험은 role/ARIA 계약과 E2E 접근성 검증으로 완화했습니다."
      comparison:
        beforeLabel: "기존 <table> 기반 아키텍처"
        afterLabel: "가상화 및 div 기반 아키텍처"
        before:
          - "DOM에 전체 행이 렌더링되어 23,000+ 노드가 유지됐습니다."
          - "고정/가상 스크롤 조합 구현 시 구조 충돌이 잦았습니다."
        after:
          - "가상화 경계 재설계로 DOM 노드를 약 90% 줄였습니다."
          - "고정/가상 조합을 패널 구조로 안정적으로 운용했습니다."
      result: "동일 시나리오 30회 측정에서 DOM 노드를 약 90% 줄였고, 대용량 화면에서도 탐색 프레임 저하 없이 기능 조합을 유지했습니다."
    - issueTitle: "열 계산 경로와 전면 리렌더 오버헤드로 리사이즈/정렬 지연이 커지는 문제"
      problems:
        - "column.getStart() 누적 계산으로 열 수가 늘수록 리사이즈 지연이 커졌습니다."
        - "변경이 없는 행까지 리렌더링되어 불필요한 연산이 반복됐습니다."
      thoughtProcess: "지연을 안정적으로 줄이려면 계산 경로 단순화와 렌더 경계 축소를 함께 설계해야 한다고 판단했습니다."
      actions:
        - "left/width 직접 계산을 줄이고 flex 기반 폭 정책을 제안해 배치 계산 경로를 재정의했습니다."
        - "React.memo 커스텀 비교 전략을 설계해 변경된 행만 리렌더링되도록 최적화를 주도했습니다."
      tradeOff: "A안(정밀 수동 계산)은 제어가 세밀했지만 유지 비용과 결함 위험이 높았습니다. B안(브라우저 레이아웃 엔진 위임)은 일부 제어를 포기해야 했지만 계산 비용을 크게 낮출 수 있어 B안을 선택했고, 위험은 폭 정책 가이드와 회귀 케이스로 완화했습니다."
      result: "리사이즈 처리 시간을 22ms에서 0.5ms로 줄였고, 인터랙션 지연을 110ms에서 20~30ms 수준으로 안정화해 운영 화면의 응답성을 높였습니다."
    - issueTitle: "이벤트 핸들러 분산과 기능 조합 증가로 회귀 위험이 커지는 문제"
      problems:
        - "셀/행 단위 핸들러가 분산돼 리렌더링마다 클로저 생성·폐기가 반복됐습니다."
        - "기능 조합이 늘수록 회귀를 수동 검증으로 커버하기 어려웠습니다."
      thoughtProcess: "성능 개선을 제품 신뢰성으로 연결하려면 이벤트 모델 단순화와 회귀 자동화를 함께 구축해야 한다고 판단했습니다."
      actions:
        - "컨테이너 이벤트 위임 모델을 설계해 핸들러 등록 지점을 단일 경로로 표준화했습니다."
        - "기능 조합 통합 테스트를 600+ 케이스로 정의하고 회귀 게이트 운영을 주도했습니다."
      tradeOff: "A안(기존 핸들러 유지)은 코드 변경 폭이 작았지만 누적 오버헤드와 회귀 위험이 지속됐습니다. B안(이벤트 위임+게이트)은 초기 구축 비용이 크지만 장기 운영 안정성이 높아 B안을 선택했고, 위험은 우선순위 시나리오부터 단계적 적용해 완화했습니다."
      result: "핸들러 오버헤드를 줄이고 600+ 조합 회귀 게이트를 확보해, 성능 개선 이후에도 기능 안정성을 지속할 수 있는 운영 기반을 만들었습니다."
  lessonsLearned: "대규모 그리드 최적화는 렌더링 기법 하나로 끝나지 않으며, 구조·계산·이벤트·검증 체계를 함께 설계해야 지속 가능한 품질이 확보된다는 점을 확인했습니다."
---

#### Architecture Summary

- table 구조를 div + virtualization 아키텍처로 재설계했습니다.
- 고정 영역과 스크롤 영역을 분리해 렌더 경계를 명확히 정의했습니다.
- 계산 경로를 단순화하고 이벤트 모델을 경량화했습니다.
- 통합 회귀 게이트를 구축해 성능 개선을 안정적으로 유지했습니다.

#### Context

- table 구조에서는 가상화와 고정 영역 조합 구현이 어려웠습니다.
- 레이아웃 계산과 전면 리렌더가 겹쳐 상호작용 지연이 누적됐습니다.
- 기능 조합 증가에 비해 회귀 검증은 수동 중심이었습니다.

#### Problem

- DOM 과다 생성으로 고밀도 화면 성능이 급격히 저하됐습니다.
- 리사이즈/정렬/스크롤 조작에서 지연이 커져 운영 생산성이 떨어졌습니다.
- 이벤트 모델 복잡도로 유지보수 비용과 회귀 위험이 증가했습니다.

#### Why It Was Hard

- 접근성, 고정 영역, 가상화, 리사이즈를 동시에 만족해야 했습니다.
- 공용 컴포넌트라 단기 성능보다 장기 확장성과 안정성을 함께 충족해야 했습니다.

#### Architecture Decision

A안(table 유지)은 기존 문맥을 보존하기 쉬웠지만 구조 제약으로 성능 상한이 분명했습니다. B안(div + virtualization 전환)은 접근성 보완과 마이그레이션 비용이 증가했지만 확장성과 성능을 함께 확보할 수 있어 B안을 선택했습니다. 위험은 role/ARIA 계약 정의와 통합 회귀 게이트로 완화했습니다.

#### Implementation Strategy

1. div 기반 렌더 경계와 패널 구조를 설계해 가상화 친화 아키텍처를 정의했습니다.
2. flex 기반 폭 정책으로 계산 경로를 단순화하고 리사이즈 비용을 줄였습니다.
3. 변경 행 중심 렌더 전략을 설계해 전면 리렌더를 제거했습니다.
4. 이벤트 위임 구조와 600+ 통합 테스트 게이트를 표준화했습니다.

#### Result

- DOM 노드: 약 90% 감소
- 리사이즈 처리: 22ms -> 0.5ms (React Profiler/Performance API, 30회 평균)
- 인터랙션 지연: 110ms -> 20~30ms (평균값·p95 기준)
- 운영 영향: 고밀도 모니터링 화면에서도 조작 지연 없이 판단/대응 흐름을 유지

#### What I Learned

- 공용 UI 성능은 구조 전환과 검증 자동화를 함께 설계할 때만 유지됩니다.
- 초기 구현 편의보다 확장 시나리오를 먼저 정의하는 것이 장기 비용을 줄입니다.
