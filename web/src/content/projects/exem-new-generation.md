---
companyId: "exem"
title: "차세대 데이터베이스 성능 모니터링 제품 개발"
company: "Exem"
description: "도메인 기반 폼 아키텍처와 상태 지역화, i18n 검증 자동화를 통해 확장성과 운영 안정성을 동시에 확보한 제품 구조 설계 사례"
dateStart: 2025-01-01
updatedAt: 2026-02-22
techStack: ["React", "TypeScript", "Zustand", "Vite", "TanStack Query"]
priority: 3
storyThread:
  context: "차트 타입 확장, 상태 생명주기 불일치, i18n 키 검증 지연이 동시에 누적되며 기능 추가 비용과 운영 리스크가 함께 증가하던 상황이었습니다."
  architectureSummary: |-
    차트 폼을 도메인 단위로 분리해 중앙 병목을 제거했습니다.
    상태 수명을 화면 수명과 일치시키는 지역화 패턴을 설계했습니다.
    i18n 검증 시점을 개발/빌드 단계로 앞당겼습니다.
    타입 기반 자동 검증으로 확장 속도와 운영 안정성을 동시에 확보했습니다.
  measurementMethod: "Vitest와 Playwright로 동일 회귀 시나리오를 20회 반복 실행했고 평균 처리 시간과 실패율(0건) 기준으로 검증했습니다."
  impacts:
    - value: "5종"
      label: "차트 타입 확장 구조 정립"
      description: "line/bar/area/scatter/table을 도메인 단위로 분리해 확장 병목을 줄였습니다."
    - value: "약 70%"
      label: "스토어 보일러플레이트 감소"
      description: "상태 지역화로 초기화/정리 반복 코드를 크게 줄였습니다."
    - value: "0건"
      label: "i18n 키 누락 런타임 장애"
      description: "타입 자동 생성과 배포 전 스캔으로 누락을 사전 차단했습니다."
  threads:
    - issueTitle: "단일 차트 스키마 집중으로 확장 시 변경 영향이 폭증하는 문제"
      problems:
        - "5종 차트 설정이 단일 스키마에 몰려 조건 분기가 빠르게 증가했습니다."
        - "새 타입 추가 시 공통 스키마를 반복 수정해야 해 배포 리스크가 커졌습니다."
      thoughtProcess: "공통화 극대화보다 도메인 경계를 먼저 설계해야 확장 속도와 안정성을 동시에 확보할 수 있다고 판단했습니다."
      actions:
        - "차트 타입별 독립 스키마와 UI 계층을 설계하고 도메인 경계 규칙 정의를 주도했습니다."
        - "공통 입력 요소를 빌딩 블록으로 재구성해 재사용 전략을 표준화했습니다."
        - "차트 타입 기반 어댑터 계층을 제안해 코어 로직 결합도를 낮췄습니다."
      tradeOff: "A안(단일 공통 스키마 유지)은 초기 이해가 쉬웠지만 확장 시 병목과 회귀 위험이 컸습니다. B안(도메인 분리)은 초기 설계 비용이 증가했지만 변경 범위를 국소화할 수 있어 B안을 선택했고, 위험은 공통 빌딩 블록 표준으로 완화했습니다."
      comparison:
        beforeLabel: "단일 스키마 집중 구조"
        afterLabel: "도메인 분리 확장 구조"
        before:
          - "새 차트 추가마다 중앙 스키마 수정이 반복됐습니다."
          - "조건 분기 증가로 변경 영향 범위가 넓어졌습니다."
        after:
          - "차트 타입별 독립 확장이 가능해졌습니다."
          - "변경 범위가 도메인 단위로 제한돼 회귀 위험이 낮아졌습니다."
      result: "차트 타입 5종을 도메인 단위로 확장 가능한 구조로 정리해, 신규 기능 추가 시 중앙 스키마 병목 없이 배포 리드타임을 단축했습니다."
    - issueTitle: "전역 상태와 화면 생명주기 불일치로 품질 저하가 반복되는 문제"
      problems:
        - "화면 전환 뒤 상태가 잔존해 수동 초기화 코드가 누적됐습니다."
        - "초기값 useEffect 패턴 증가로 무한 리렌더링 이슈가 반복됐습니다."
      thoughtProcess: "상태 품질은 API가 아니라 수명 설계 문제이므로 화면 수명과 상태 수명을 정렬해야 한다고 판단했습니다."
      actions:
        - "Provider 생명주기 기반 지역 스토어 생성/정리 패턴을 설계하고 적용을 주도했습니다."
        - "초기값 주입과 훅 구성을 공통 팩토리로 정의해 상태 생성 규칙을 표준화했습니다."
      tradeOff: "A안(전역 상태 유지)은 단기 개발 속도가 빨랐지만 상태 누수와 디버깅 비용이 컸습니다. B안(지역 상태화)은 초기 구조 전환 비용이 있었지만 유지보수성과 안정성이 높아 B안을 선택했고, 위험은 템플릿화된 팩토리 패턴으로 완화했습니다."
      result: "스토어 보일러플레이트를 약 70% 줄였고, 화면 전환 시 상태 누수 이슈를 줄여 디버깅과 유지보수 효율을 높였습니다."
    - issueTitle: "i18n 키 누락이 런타임에서 발견되어 배포 안정성을 해치는 문제"
      problems:
        - "정의되지 않은 번역 키가 런타임에서 노출되는 장애가 발생했습니다."
        - "수동 검증 중심 프로세스로 리뷰 단계 비용이 지속적으로 증가했습니다."
      thoughtProcess: "검증 시점을 런타임 이후에 두면 반복 장애를 막기 어렵기 때문에 컴파일 단계에서 실패시키는 구조가 필요하다고 판단했습니다."
      actions:
        - "번역 JSON 기반 TypeScript 타입 자동 생성 체계를 설계해 미등록 키 사용을 컴파일 단계에서 차단했습니다."
        - "배포 전 키 스캔 파이프라인을 정의하고 회귀 시나리오를 표준화했습니다."
      tradeOff: "A안(런타임 검증 유지)은 도입 비용이 낮았지만 장애 발견 시점이 늦었습니다. B안(빌드 단계 차단)은 초기 자동화 구축 비용이 들지만 장애를 선제 차단할 수 있어 B안을 선택했고, 위험은 점진 적용과 경고 단계 운영으로 완화했습니다."
      result: "동일 회귀 시나리오 20회 반복 기준 i18n 키 누락 런타임 장애 0건을 유지해 배포 안정성을 높였습니다."
  lessonsLearned: "확장성과 안정성은 트레이드오프가 아니라, 도메인 경계 설계와 검증 자동화를 함께 설계할 때 동시에 달성할 수 있다는 점을 팀 규칙으로 정리했습니다."
---

#### Architecture Summary

- 차트 폼을 도메인 단위로 분리해 중앙 병목을 제거했습니다.
- 상태 수명을 화면 수명과 일치시키는 지역화 패턴을 설계했습니다.
- i18n 검증 시점을 개발/빌드 단계로 앞당겼습니다.
- 타입 기반 자동 검증으로 확장 속도와 운영 안정성을 동시에 확보했습니다.

#### Context

- 차트 타입 확장 요구가 빠르게 증가했습니다.
- 상태 생명주기 불일치로 수동 초기화와 디버깅 비용이 커졌습니다.
- i18n 키 누락이 배포 이후 발견돼 품질 리스크가 누적됐습니다.

#### Problem

- 단일 스키마 구조가 확장 병목이 되어 변경 리스크를 키웠습니다.
- 전역 상태 잔존으로 화면 전환 안정성이 떨어졌습니다.
- 검증 시점이 늦어 런타임 장애를 사전에 막기 어려웠습니다.

#### Why It Was Hard

- 폼 아키텍처, 상태 관리, i18n 검증이 서로 다른 계층 문제라 단일 수정으로 해결되지 않았습니다.
- 기능 확장 속도를 유지하면서 운영 안정성까지 동시에 만족해야 했습니다.

#### Architecture Decision

A안(중앙 공통 스키마 + 전역 상태 + 런타임 검증 유지)은 초기 속도가 빠르지만 확장 병목과 품질 리스크가 컸습니다. B안(도메인 분리 + 상태 지역화 + 빌드 단계 검증)은 초기 설계 비용이 높지만 장기 안정성이 높아 B안을 선택했습니다. 리스크는 공통 빌딩 블록, 팩토리 템플릿, 점진 적용 규칙으로 완화했습니다.

#### Implementation Strategy

1. 차트 타입별 스키마/UI/어댑터를 설계해 도메인 경계를 명확히 정의했습니다.
2. Provider 생명주기 기반 상태 지역화 패턴을 표준화했습니다.
3. 번역 키 타입 자동 생성과 배포 전 스캔을 파이프라인에 통합했습니다.
4. Vitest/Playwright 회귀 시나리오 20회 반복 검증으로 안정성을 확인했습니다.

#### Result

- 차트 타입 확장: 5종 구조를 중앙 병목 없이 유지
- 상태 관리: 스토어 보일러플레이트 약 70% 감소
- i18n 품질: 런타임 키 누락 장애 0건 (20회 회귀 기준)
- 운영 영향: 기능 추가 시 변경 범위가 줄어 배포 예측 가능성과 리뷰 효율이 향상

#### What I Learned

- 확장성과 안정성은 도메인 경계와 검증 시점을 먼저 설계할 때 함께 개선됩니다.
- 상태 수명 설계는 성능 최적화만큼 제품 품질에 직접적인 영향을 줍니다.
