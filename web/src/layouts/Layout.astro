---
import "../styles/global.css"
import { SEO } from "astro-seo"
import { ChatWidget } from "@/components/chat/ChatWidget"
import { Navigation } from "@/components/navigation"

interface Props {
  title?: string
  description?: string
}

const {
  title = "Gihwan-dev | AI와 함께하는 이력서",
  description = "최기환의 AI 기반 개발자 포트폴리오입니다. RAG 기술이 적용된 AI 페르소나와 직접 대화하며 경력과 기술을 확인해보세요.",
} = Astro.props
---

<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    
    <SEO
      title={title}
      description={description}
      openGraph={{
        basic: {
          title: title,
          type: "website",
          image: "/og-image.svg",
        },
        image: {
            alt: "Gihwan-dev AI Resume Preview",
        }
      }}
      extend={{
        meta: [
            { name: "twitter:card", content: "summary_large_image" },
            { name: "twitter:title", content: title },
            { name: "twitter:description", content: description },
            { name: "twitter:image", content: "/og-image.svg" },
        ],
        link: [
           { rel: "sitemap", href: "/sitemap-index.xml" }
        ]
      }}
    />
    
    <script is:inline>
      (function () {
        const theme = localStorage.getItem("theme");
        if (
          theme === "dark" ||
          (!theme && window.matchMedia("(prefers-color-scheme: dark)").matches)
        ) {
          document.documentElement.classList.add("dark");
        } else {
          document.documentElement.classList.remove("dark");
        }
      })();
    </script>
  </head>
  <body
    class="bg-resume-bg text-resume-text-main min-h-screen font-sans antialiased selection:bg-resume-primary selection:text-white"
  >
    <Navigation client:load />
    <slot />
    <ChatWidget client:load />
  </body>
</html>

<style>
  html,
  body {
    margin: 0;
    width: 100%;
    height: 100%;
  }
</style>
